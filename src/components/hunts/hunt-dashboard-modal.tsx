'use client'\n\nimport { useState } from 'react'\nimport { Crown, Users, MapPin, Calendar, Trophy, Eye } from 'lucide-react'\nimport { Button } from '@/components/ui/button'\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog'\nimport { Badge } from '@/components/ui/badge'\nimport type { TreasureHunt, HuntParticipant } from '@/types'\nimport { cn } from '@/lib/utils'\n\ninterface HuntDashboardModalProps {\n  isOpen: boolean\n  onClose: () => void\n}\n\n// Mock data for development - in production this would come from API\nconst demoHunts: TreasureHunt[] = [\n  {\n    id: 'office-hunt-2024',\n    ownerId: 'current-user',\n    title: 'üè¢ Office Adventure Challenge',\n    description: 'A fun scavenger hunt around the office! Find hidden clues and solve puzzles.',\n    difficulty: 'intermediate',\n    status: 'active',\n    maxParticipants: 10,\n    startDate: new Date(Date.now() - 24 * 60 * 60 * 1000) as any,\n    endDate: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000) as any,\n    createdAt: new Date(Date.now() - 48 * 60 * 60 * 1000) as any,\n    updatedAt: new Date() as any,\n    stats: {\n      totalParticipants: 5,\n      completedParticipants: 1,\n      totalDrops: 2\n    }\n  },\n  {\n    id: 'london-exploration',\n    ownerId: 'current-user',\n    title: 'üåÜ London Historical Tour',\n    description: 'Explore London\\'s rich history through an interactive treasure hunt.',\n    difficulty: 'beginner',\n    status: 'draft',\n    maxParticipants: 20,\n    createdAt: new Date(Date.now() - 12 * 60 * 60 * 1000) as any,\n    updatedAt: new Date() as any,\n    stats: {\n      totalParticipants: 0,\n      completedParticipants: 0,\n      totalDrops: 0\n    }\n  }\n]\n\nconst demoParticipants: HuntParticipant[] = [\n  {\n    id: 'participant-1',\n    huntId: 'office-hunt-2024',\n    userId: 'user-3',\n    email: 'alice@company.com',\n    displayName: 'Alice Johnson',\n    status: 'joined',\n    joinedAt: new Date(Date.now() - 20 * 60 * 60 * 1000) as any,\n    progress: {\n      dropsFound: 2,\n      totalDrops: 2,\n      lastActivityAt: new Date(Date.now() - 2 * 60 * 60 * 1000) as any\n    }\n  },\n  {\n    id: 'participant-2',\n    huntId: 'office-hunt-2024',\n    userId: 'user-4',\n    email: 'bob@company.com',\n    displayName: 'Bob Smith',\n    status: 'joined',\n    joinedAt: new Date(Date.now() - 18 * 60 * 60 * 1000) as any,\n    progress: {\n      dropsFound: 1,\n      totalDrops: 2,\n      lastActivityAt: new Date(Date.now() - 4 * 60 * 60 * 1000) as any\n    }\n  }\n]\n\nfunction HuntCard({ hunt }: { hunt: TreasureHunt }) {\n  const [selectedHunt, setSelectedHunt] = useState<TreasureHunt | null>(null)\n  \n  const statusColors = {\n    draft: 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300',\n    active: 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300',\n    completed: 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300',\n    expired: 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300'\n  }\n  \n  const difficultyColors = {\n    beginner: 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300',\n    intermediate: 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300', \n    expert: 'bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-300',\n    master: 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300'\n  }\n  \n  return (\n    <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 hover:shadow-lg transition-shadow\">\n      <div className=\"flex items-start justify-between mb-4\">\n        <div className=\"flex items-center gap-3\">\n          <div className=\"w-10 h-10 bg-purple-100 dark:bg-purple-900 rounded-lg flex items-center justify-center\">\n            <Crown className=\"w-5 h-5 text-purple-600 dark:text-purple-400\" />\n          </div>\n          <div>\n            <h3 className=\"font-semibold text-gray-900 dark:text-white\">{hunt.title}</h3>\n            <p className=\"text-sm text-gray-600 dark:text-gray-400\">{hunt.description}</p>\n          </div>\n        </div>\n        <div className=\"flex gap-2\">\n          <div className={cn('inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-semibold', statusColors[hunt.status])}>\n            {hunt.status}\n          </div>\n          <div className={cn('inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-semibold', difficultyColors[hunt.difficulty])}>\n            {hunt.difficulty}\n          </div>\n        </div>\n      </div>\n      \n      <div className=\"grid grid-cols-3 gap-4 mb-4\">\n        <div className=\"text-center\">\n          <div className=\"text-2xl font-bold text-purple-600\">{hunt.stats.totalParticipants}</div>\n          <div className=\"text-xs text-gray-500\">Participants</div>\n        </div>\n        <div className=\"text-center\">\n          <div className=\"text-2xl font-bold text-green-600\">{hunt.stats.completedParticipants}</div>\n          <div className=\"text-xs text-gray-500\">Completed</div>\n        </div>\n        <div className=\"text-center\">\n          <div className=\"text-2xl font-bold text-blue-600\">{hunt.stats.totalDrops}</div>\n          <div className=\"text-xs text-gray-500\">Locations</div>\n        </div>\n      </div>\n      \n      {hunt.startDate && hunt.endDate && (\n        <div className=\"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400 mb-4\">\n          <Calendar className=\"w-4 h-4\" />\n          <span>\n            {new Date(hunt.startDate).toLocaleDateString()} - {new Date(hunt.endDate).toLocaleDateString()}\n          </span>\n        </div>\n      )}\n      \n      <div className=\"flex gap-2\">\n        <Button \n          variant=\"outline\" \n          size=\"sm\" \n          className=\"flex-1\"\n          onClick={() => setSelectedHunt(hunt)}\n        >\n          <Eye className=\"w-4 h-4 mr-2\" />\n          View Details\n        </Button>\n        <Button \n          size=\"sm\" \n          className=\"flex-1 bg-purple-600 hover:bg-purple-700\"\n        >\n          <Trophy className=\"w-4 h-4 mr-2\" />\n          Manage Hunt\n        </Button>\n      </div>\n      \n      {/* Hunt Details Modal */}\n      {selectedHunt && (\n        <Dialog open={!!selectedHunt} onOpenChange={() => setSelectedHunt(null)}>\n          <DialogContent className=\"max-w-2xl\">\n            <DialogHeader>\n              <DialogTitle className=\"flex items-center gap-2\">\n                <Crown className=\"w-5 h-5 text-purple-600\" />\n                {selectedHunt.title}\n              </DialogTitle>\n            </DialogHeader>\n            \n            <div className=\"space-y-6\">\n              <div>\n                <h4 className=\"font-medium mb-2\">Description</h4>\n                <p className=\"text-gray-600 dark:text-gray-400\">{selectedHunt.description}</p>\n              </div>\n              \n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <h4 className=\"font-medium mb-2\">Hunt Statistics</h4>\n                  <div className=\"space-y-2 text-sm\">\n                    <div className=\"flex justify-between\">\n                      <span>Status:</span>\n                      <div className={cn('inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-semibold', statusColors[selectedHunt.status])}>\n                        {selectedHunt.status}\n                      </div>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <span>Difficulty:</span>\n                      <div className={cn('inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-semibold', difficultyColors[selectedHunt.difficulty])}>\n                        {selectedHunt.difficulty}\n                      </div>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <span>Participants:</span>\n                      <span>{selectedHunt.stats.totalParticipants}/{selectedHunt.maxParticipants || '‚àû'}</span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <span>Locations:</span>\n                      <span>{selectedHunt.stats.totalDrops}</span>\n                    </div>\n                  </div>\n                </div>\n                \n                <div>\n                  <h4 className=\"font-medium mb-2\">Participants</h4>\n                  <div className=\"space-y-2 max-h-32 overflow-y-auto\">\n                    {demoParticipants\n                      .filter(p => p.huntId === selectedHunt.id)\n                      .map(participant => (\n                        <div key={participant.id} className=\"flex items-center justify-between text-sm\">\n                          <div>\n                            <div className=\"font-medium\">{participant.displayName}</div>\n                            <div className=\"text-gray-500\">{participant.email}</div>\n                          </div>\n                          <div className=\"text-right\">\n                            <div className=\"text-purple-600 font-medium\">\n                              {participant.progress.dropsFound}/{participant.progress.totalDrops}\n                            </div>\n                            <div className=\"text-gray-500\">\n                              {participant.status === 'joined' ? 'Active' : 'Invited'}\n                            </div>\n                          </div>\n                        </div>\n                      ))\n                    }\n                  </div>\n                </div>\n              </div>\n            </div>\n          </DialogContent>\n        </Dialog>\n      )}\n    </div>\n  )\n}\n\nexport function HuntDashboardModal({ isOpen, onClose }: HuntDashboardModalProps) {\n  const [activeTab, setActiveTab] = useState<'created' | 'joined'>('created')\n  \n  return (\n    <Dialog open={isOpen} onOpenChange={onClose}>\n      <DialogContent className=\"max-w-4xl max-h-[80vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle className=\"flex items-center gap-2 text-2xl\">\n            <Crown className=\"w-6 h-6 text-purple-600\" />\n            Treasure Hunt Dashboard\n          </DialogTitle>\n        </DialogHeader>\n        \n        <div className=\"space-y-6\">\n          {/* Tab Navigation */}\n          <div className=\"flex space-x-1 bg-gray-100 dark:bg-gray-800 rounded-lg p-1\">\n            <button\n              onClick={() => setActiveTab('created')}\n              className={cn(\n                'flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors',\n                activeTab === 'created'\n                  ? 'bg-white dark:bg-gray-700 text-purple-600 shadow-sm'\n                  : 'text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200'\n              )}\n            >\n              <Crown className=\"w-4 h-4 inline mr-2\" />\n              My Hunts ({demoHunts.length})\n            </button>\n            <button\n              onClick={() => setActiveTab('joined')}\n              className={cn(\n                'flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors',\n                activeTab === 'joined'\n                  ? 'bg-white dark:bg-gray-700 text-purple-600 shadow-sm'\n                  : 'text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200'\n              )}\n            >\n              <Users className=\"w-4 h-4 inline mr-2\" />\n              Joined Hunts (1)\n            </button>\n          </div>\n          \n          {/* Tab Content */}\n          {activeTab === 'created' && (\n            <div className=\"space-y-4\">\n              <div className=\"flex items-center justify-between\">\n                <h3 className=\"text-lg font-semibold\">Your Created Hunts</h3>\n                <Button className=\"bg-purple-600 hover:bg-purple-700\">\n                  <Crown className=\"w-4 h-4 mr-2\" />\n                  Create New Hunt\n                </Button>\n              </div>\n              \n              <div className=\"grid gap-4\">\n                {demoHunts.map(hunt => (\n                  <HuntCard key={hunt.id} hunt={hunt} />\n                ))}\n              </div>\n              \n              {demoHunts.length === 0 && (\n                <div className=\"text-center py-12\">\n                  <Crown className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\n                  <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-2\">\n                    No treasure hunts created yet\n                  </h3>\n                  <p className=\"text-gray-600 dark:text-gray-400 mb-4\">\n                    Create your first treasure hunt to start the adventure!\n                  </p>\n                  <Button className=\"bg-purple-600 hover:bg-purple-700\">\n                    <Crown className=\"w-4 h-4 mr-2\" />\n                    Create Your First Hunt\n                  </Button>\n                </div>\n              )}\n            </div>\n          )}\n          \n          {activeTab === 'joined' && (\n            <div className=\"space-y-4\">\n              <h3 className=\"text-lg font-semibold\">Hunts You've Joined</h3>\n              \n              {/* Demo joined hunt */}\n              <div className=\"bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 rounded-lg border border-purple-200 dark:border-purple-800 p-6\">\n                <div className=\"flex items-center justify-between mb-4\">\n                  <div className=\"flex items-center gap-3\">\n                    <div className=\"w-10 h-10 bg-purple-100 dark:bg-purple-900 rounded-lg flex items-center justify-center\">\n                      <Trophy className=\"w-5 h-5 text-purple-600 dark:text-purple-400\" />\n                    </div>\n                    <div>\n                      <h4 className=\"font-semibold text-gray-900 dark:text-white\">üè¢ Office Adventure Challenge</h4>\n                      <p className=\"text-sm text-gray-600 dark:text-gray-400\">by Team Building Committee</p>\n                    </div>\n                  </div>\n                  <div className=\"inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-semibold bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300\">\n                    Active\n                  </div>\n                </div>\n                \n                <div className=\"grid grid-cols-3 gap-4 mb-4\">\n                  <div className=\"text-center\">\n                    <div className=\"text-xl font-bold text-purple-600\">2/2</div>\n                    <div className=\"text-xs text-gray-500\">Locations Found</div>\n                  </div>\n                  <div className=\"text-center\">\n                    <div className=\"text-xl font-bold text-green-600\">100%</div>\n                    <div className=\"text-xs text-gray-500\">Progress</div>\n                  </div>\n                  <div className=\"text-center\">\n                    <div className=\"text-xl font-bold text-blue-600\">#1</div>\n                    <div className=\"text-xs text-gray-500\">Ranking</div>\n                  </div>\n                </div>\n                \n                <div className=\"flex gap-2\">\n                  <Button variant=\"outline\" size=\"sm\" className=\"flex-1\">\n                    <MapPin className=\"w-4 h-4 mr-2\" />\n                    View on Map\n                  </Button>\n                  <Button size=\"sm\" className=\"flex-1 bg-purple-600 hover:bg-purple-700\">\n                    <Trophy className=\"w-4 h-4 mr-2\" />\n                    Continue Hunt\n                  </Button>\n                </div>\n              </div>\n              \n              <div className=\"text-center py-8\">\n                <Users className=\"w-8 h-8 text-gray-400 mx-auto mb-2\" />\n                <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                  No other active hunts. Wait for more invitations!\n                </p>\n              </div>\n            </div>\n          )}\n        </div>\n      </DialogContent>\n    </Dialog>\n  )\n}"